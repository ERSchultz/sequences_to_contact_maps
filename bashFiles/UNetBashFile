#! /bin/bash
#SBATCH --job-name=UNet
#SBATCH --output=logFiles/UNet.out
#SBATCH --time=05:00:00
#SBATCH --partition=depablo-gpu
#SBATCH --gres=gpu:1
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=4
#SBATCH --mem-per-cpu=2000

dirname="/../../../project2/depablo/erschultz/dataset_04_18_21"
modelType='UNet'

# preprocessing
toxx='true'
xReshape='false'

# architecture
k=2
n=1024
yPreprocessing='prcnt'
yNorm='none'
nf=8
loss='cross_entropy'
outAct='none'

# hyperparameters
nEpochs=20
batchSize=16
numWorkers=4
milestones=None
gamma=0.1

cd ~/sequences_to_contact_maps
source activate seq2contact_pytorch

lr=1e-1
python3 UNet.py --data_folder $dirname --model_type $modelType --toxx $toxx --x_reshape $xReshape --k $k --n $n --y_preprocessing ${yPreprocessing} --y_norm $yNorm --nf $nf --loss $loss --out_act $outAct --n_epochs $nEpochs --lr $lr --batch_size $batchSize --num_workers $numWorkers --milestones $milestones --gamma $gamma

lr=1e-2
python3 UNet.py --data_folder $dirname --model_type $modelType --toxx $toxx --x_reshape $xReshape --k $k --n $n --y_preprocessing ${yPreprocessing} --y_norm $yNorm --nf $nf --loss $loss --out_act $outAct --n_epochs $nEpochs --lr $lr --batch_size $batchSize --num_workers $numWorkers --milestones $milestones --gamma $gamma


lr=1e-3
python3 UNet.py --data_folder $dirname --model_type $modelType --toxx $toxx --x_reshape $xReshape --k $k --n $n --y_preprocessing ${yPreprocessing} --y_norm $yNorm --nf $nf --loss $loss --out_act $outAct --n_epochs $nEpochs --lr $lr --batch_size $batchSize --num_workers $numWorkers --milestones $milestones --gamma $gamma
