#! /bin/bash
#SBATCH --job-name=UNet
#SBATCH --output=logFiles/UNet.out
#SBATCH --time=03:00:00
#SBATCH --partition=gpu2
#SBATCH --gres=gpu:1
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=4
#SBATCH --mem-per-cpu=2000
#SBATCH --mem-per-gpu=5000

dirname="/../../../project2/depablo/erschultz/dataset_04_18_21"
nEpochs=2
nf=8
lr=0.1
batchSize=32
numWorkers=4
milestones='5-10'
gamma=0.1
k=2
n=1024
yNorm='prcnt'

ofile="UNet_nEpochs${nEpochs}_nf${nf}_lr${lr}_milestones${milestones}_yNorm${yNorm}"
logfile="logFiles/${ofile}.log"

cd ~/sequences_to_contact_maps
source activate seq2contact_pytorch
python3 UNet.py --data_folder $dirname --n_epochs $nEpochs --nf $nf --batch_size $batchSize --num_workers $numWorkers --milestones $milestones --gamma $gamma --k $k --ofile $ofile --n $n --y_norm $yNorm >> $logfile
